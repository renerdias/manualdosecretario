(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{482:function(e,s,a){"use strict";a.r(s);var t=a(0),r=Object(t.a)({},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),a("p",[e._v("Certificados SSL trazem mais segurança na transmissão de dados entre clientes e\nservidores. Com sua utilização os dados trafegados entre as partes se tornam\ninelegíveis durante a conexão.")]),e._v(" "),a("p",[e._v("Essa proteção é criada a partir de uma chave de criptografia forte que\nembaralha as informações enviadas pelo usuário, de modo que seja impossível\ndescobrir o conteúdo de dentro da chave e o único lugar que pode desembaralhar\neste conteúdo é o servidor onde está instalado o Certificado SSL.")]),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._m(8),e._v(" "),e._m(9),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),a("p",[e._v("O arquivo "),a("code",[e._v(".csr")]),e._v(" deve ser enviado em anexo na "),a("a",{attrs:{href:"https://ifce.edu.br/centraldeatendimento",target:"_blank",rel:"noopener noreferrer"}},[e._v("Central de Atendimento"),a("OutboundLink")],1),e._v('\nnos itens "Servidor" > "Tecnologia da Informação (DGTI)" > "Redes e Internet" >\n"Hospedagem e Servidor Virtual" > "Solicitar certificado (SSL) para um domínio/aplicação".')]),e._v(" "),a("p",[e._v("Na descrição você deve ainda, indicar o subdomínio ao qual o certificado SSL estará\nconectado.")]),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),a("p",[e._v("O servidor Nginx espera que o certificado seja um conjunto de certificados, para tanto, você\ndeve concatenar os arquivos levando em consideração a seguinte ordem:")]),e._v(" "),a("ol",[e._m(16),e._v(" "),a("li",[e._v("Certificado SSL de domínio intermediário "),a("a",{attrs:{href:"https://support.globalsign.com/customer/en/portal/articles/1464460-domainssl-intermediate-certificates",target:"_blank",rel:"noopener noreferrer"}},[e._v("(baixe aqui)"),a("OutboundLink")],1),e._v("\n(clique em "),a("em",[e._v("View in Base64")]),e._v(" e salve o conteúdo no diretório "),a("code",[e._v("certs")]),e._v(", com nome "),a("code",[e._v("intermediate.crt")]),e._v(".)")]),e._v(" "),a("li",[e._v("Certificado raíz R1 Global Sign "),a("a",{attrs:{href:"https://support.globalsign.com/customer/en/portal/articles/1426602-globalsign-root-certificates",target:"_blank",rel:"noopener noreferrer"}},[e._v("(baixe aqui)"),a("OutboundLink")],1),e._v("\n(clique em "),a("em",[e._v("View in Base64")]),e._v(" e salve o conteúdo no diretório "),a("code",[e._v("certs")]),e._v(", com nome "),a("code",[e._v("root.crt")]),e._v(".)")])]),e._v(" "),e._m(17),e._v(" "),e._m(18),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),a("p",[e._v("Lembre-se de alterar o arquivo acima para as suas necessidades.")]),e._v(" "),e._m(22),e._v(" "),a("p",[e._v("Para facilitar a configuração do Nginx, remova a senha adicionada a\nchave criada na seção "),a("router-link",{attrs:{to:"/guides/web/ssl.html#gerar-certificado-ssl"}},[e._v("Gerar Certificado SSL")]),e._v("\ncom o comando:")],1),e._v(" "),e._m(23),e._m(24),e._v(" "),e._m(25),e._v(" "),a("p",[e._v("Além desse tutorial rápido você pode saber mais sobre o assunto ao ler\nos seguintes links.")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://cartilha.cert.br/criptografia/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Criptografia"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://nginx.org/en/docs/beginners_guide.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Configuração Nginx"),a("OutboundLink")],1),e._v(" (em inglês)")]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/tldr-pages/tldr/blob/master/pages/common/openssl.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("Ferramenta openssl"),a("OutboundLink")],1),e._v(" (em inglês)")])])])},[function(){var e=this.$createElement,s=this._self._c||e;return s("h1",{attrs:{id:"resultados-obtidos-com-essa-documentacao"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resultados-obtidos-com-essa-documentacao","aria-hidden":"true"}},[this._v("#")]),this._v(" Resultados obtidos com essa documentação")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Nesta seção você aprenderá para que serve, como obter e\nutilizar o certificado SSL em seu servidor web. Também vai\naprender como criar uma chave em ambientes Linux e servir o\ncertificado gerado em servidores Web, podendo assim, servir\npáginas com o protocolo "),s("code",[this._v("https")]),this._v(".")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"para-que-serve-o-certificado-ssl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#para-que-serve-o-certificado-ssl","aria-hidden":"true"}},[this._v("#")]),this._v(" Para que serve o certificado SSL")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"gerar-certificado-ssl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gerar-certificado-ssl","aria-hidden":"true"}},[this._v("#")]),this._v(" Gerar certificado SSL")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Em um sistema operacional Linux, verifique se você tem instalado o aplicativo\n"),s("code",[this._v("openssl")]),this._v(". Sugerimos a seguinte estrutura organizacional de diretórios:")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("<sub-dominio>.ifce.edu.br\n├── certs # local de criação das chaves\n├── infra # arquivos de configuração relacionados ao servidor\n└── src # código da aplicação\n...\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("No diretório "),s("code",[this._v("certs")]),this._v(" execute o seguinte comando, modificando os termos\nentre os sinais "),s("code",[this._v("<>")]),this._v(" com o valor real.")])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ openssl genrsa -des3 -out <sub-dominio>.ifce.edu.br.key 2048\nGenerating RSA private key, 2048 bit long modulus\n..........+++\n..................+++\ne is 65537 (0x010001)\nEnter pass phrase for <sub-dominio>.ifce.edu.br.key:\nVerifying - Enter pass phrase for <sub-dominio>.ifce.edu.br.key:\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("A partir da chave privada, vamos gerar o arquivo "),s("code",[this._v(".csr")]),this._v(" ("),s("em",[this._v("Certificate Signing\nRequest")]),this._v(") com o seguinte comando:")])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ openssl req -new -key <sub-dominio>.ifce.edu.br.key -out <sub-dominio>.ifce.edu.br.csr\nEnter pass phrase for <sub-dominio>.ifce.edu.br.key:\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:BR\nState or Province Name (full name) [Some-State]:Ceara\nLocality Name (eg, city) []:Fortaleza\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:IFCE\nOrganizational Unit Name (eg, section) []:DGTI\nCommon Name (e.g. server FQDN or YOUR name) []:<sub-dominio>.ifce.edu.br\nEmail Address []:<responsavel>@ifce.edu.br\n\nPlease enter the following 'extra' attributes\nto be sent with your certificate request\nA challenge password []:\nAn optional company name []:\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("Atributos extras")]),this._v(" "),s("p",[this._v("Os atributos extras são opcionais. Por esse motivo, não preencheremos.")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Ao fim destes passos, você terá dois arquivos no diretório "),s("code",[this._v("certs")]),this._v(". Um\ncom extensão "),s("code",[this._v(".key")]),this._v(" e outro com extensão "),s("code",[this._v(".csr")]),this._v(".")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"enviar-o-arquivo-csr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enviar-o-arquivo-csr","aria-hidden":"true"}},[this._v("#")]),this._v(" Enviar o arquivo "),s("code",[this._v(".csr")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"trabalhando-com-o-certificado-ssl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#trabalhando-com-o-certificado-ssl","aria-hidden":"true"}},[this._v("#")]),this._v(" Trabalhando com o certificado SSL")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Você receberá o certificado SSL por e-mail, em seguida, será necessário configurar o\nseu servidor Web para responder requisições "),s("code",[this._v("https")]),this._v(".")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h3",{attrs:{id:"certificado-ssl-no-servidor-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#certificado-ssl-no-servidor-nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" Certificado SSL no servidor Nginx")])},function(){var e=this.$createElement,s=this._self._c||e;return s("li",[this._v("Certificado enviado por e-mail (salve o conteúdo no diretório "),s("code",[this._v("certs")]),this._v(", com nome "),s("code",[this._v("site.crt")]),this._v(".)")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Você pode utilizar o comando "),s("code",[this._v("cat")]),this._v(' para obter um único arquivo "'),s("em",[this._v("bundle")]),this._v('".')])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ cat site.crt intermediate.crt root.crt > bundle.<sub-dominio>.ifce.edu.br.crt\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Você deve agora ter dois arquivos principais que devem ser referenciados no\narquivo de configuração do "),s("em",[this._v("Virtual Host")]),this._v(" do servidor Nginx.")])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("p",[e._v("Espera-se que o arquivo de configuração de apresentado abaixo seja\ncolocado no diretório "),a("code",[e._v("/etc/nginx/conf.d/")]),e._v(" e que os certificados sejam colocados\nno diretório "),a("code",[e._v("/etc/secrets/")]),e._v(" como representado nas linhas "),a("code",[e._v("14")]),e._v(" e "),a("code",[e._v("15")]),e._v(" do código\nabaixo.")])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("server {\n  listen 80;\n  server_name <sub-dominio>.ifce.edu.br;\n\n  location / {\n    return 301 https://$host$uri;\n\t}\n}\n\nserver {\n  listen 443 ssl;\n  server_name <sub-dominio>.ifce.edu.br;\n\n  ssl_certificate /etc/secrets/bundle.<sub-dominio>.ifce.edu.br.crt;\n  ssl_certificate_key /etc/secrets/<sub-dominio>.ifce.edu.br.key;\n\n  location / {\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $remote_addr;\n    proxy_set_header Host $host;\n    proxy_pass http://127.0.0.1:8080;\n    proxy_redirect http:// https://;\n\t}\n}\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h3",{attrs:{id:"removendo-a-senha-da-chave"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removendo-a-senha-da-chave","aria-hidden":"true"}},[this._v("#")]),this._v(" Removendo a senha da chave")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ openssl rsa -in <sub-dominio>.ifce.edu.br.key -out <sub-dominio>.ifce.edu.br.key\nEnter pass phrase for wiki.ubajara.ifce.edu.br.key:\nwriting RSA key\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("Após reiniciar o servidor Nginx com as novas configurações você verá,\nao acessar a sua aplicação "),s("em",[this._v("web")]),this._v(" que ela já está com o certificado\nhabilitado.")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"leituras-extras"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#leituras-extras","aria-hidden":"true"}},[this._v("#")]),this._v(" Leituras extras")])}],!1,null,null,null);s.default=r.exports}}]);